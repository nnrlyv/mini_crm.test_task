
 1. База данных и модели
- **Operator** — активность, лимит нагрузки, текущая нагрузка.
- **Source** — источники (боты).
- **Lead** — определение лида по внешнему идентификатору.
- **Contact** — обращения лидов.
- **OperatorSourceWeight** — веса операторов для конкретного источника.

Все модели связаны между собой через SQLAlchemy ORM.

---

### 2. CRUD-эндпоинты
**Операторы**
- создание оператора  
- просмотр списка  
- обновление активности / лимита  

**Источники**
- создание источника  
- привязка оператора к источнику с весом  

**Контакты**
- создание обращения  
- получение всех обращений  

**Лиды**
- список лидов  
- список обращений конкретного лида  

---

### 3. Алгоритм распределения обращений
Реализована логика выбора оператора при создании обращения:

1. По `external_id` определяется или создаётся лид.  
2. Из источника берутся все операторы, имеющие вес.  
3. Фильтрация операторов по условиям:
   - активен  
   - текущая нагрузка меньше лимита  
4. Выбор по весам:
   ```python
   random.choices(operators, weights)
